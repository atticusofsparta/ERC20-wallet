{"ast":null,"code":"import _regeneratorRuntime from\"/home/dev/Documents/GitHub/ERC20-wallet/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/dev/Documents/GitHub/ERC20-wallet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/dev/Documents/GitHub/ERC20-wallet/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{ethers}from'ethers';import LoadingSpinner from'../LoadingSpinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginModal=function LoginModal(_ref){var setWallet=_ref.setWallet,setLogin=_ref.setLogin;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];function decrypt(){return _decrypt.apply(this,arguments);}function _decrypt(){_decrypt=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var json,encrypted,decrypted;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;json=window.localStorage.getItem(\"walletManager\");setLoading(true);encrypted=JSON.parse(json);_context.next=6;return ethers.Wallet.fromEncryptedJson(encrypted,password);case 6:decrypted=_context.sent;setWallet(decrypted);setLogin(false);_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);setLoading(false);alert(\"wrong password. If you cant remember your password and wish to restart, you can delete your wallet\",/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){window.localStorage.removeItem(\"walletManager\");},children:\"Delete wallet\"}));case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return _decrypt.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"modalBackground\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"modalHeader\",children:loading?\"Loading\":\"Login with your encryption password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modalBody\",children:[loading?/*#__PURE__*/_jsx(LoadingSpinner,{}):/*#__PURE__*/_jsx(_Fragment,{}),\"Password: \",/*#__PURE__*/_jsx(\"input\",{className:\"modal-input\",type:\"text\",value:password,onChange:function onChange(e){setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-big\",onClick:function onClick(){decrypt();},children:\"Login\"})]})]})});};export default LoginModal;","map":{"version":3,"names":["useState","ethers","LoadingSpinner","LoginModal","setWallet","setLogin","password","setPassword","loading","setLoading","decrypt","json","window","localStorage","getItem","encrypted","JSON","parse","Wallet","fromEncryptedJson","decrypted","alert","removeItem","e","target","value"],"sources":["/home/dev/Documents/GitHub/ERC20-wallet/app/src/components/modals/LoginModal.js"],"sourcesContent":["import {useState} from 'react'\nimport {ethers} from 'ethers'\nimport LoadingSpinner from '../LoadingSpinner'\n\n\nconst LoginModal = ({setWallet, setLogin}) => {\n\n    const [password, setPassword] = useState(\"\")\n    const [loading, setLoading] = useState(false)\n\n    async function decrypt(){\n\n       try { const json = window.localStorage.getItem(\"walletManager\")\n       setLoading(true)\n        const encrypted = JSON.parse(json)\n        const decrypted = await ethers.Wallet.fromEncryptedJson(encrypted, password)\n        setWallet(decrypted)\n        setLogin(false)\n        } catch (error) {setLoading(false)\n            alert(\"wrong password. If you cant remember your password and wish to restart, you can delete your wallet\", <button onClick={()=>{window.localStorage.removeItem(\"walletManager\")}}>Delete wallet</button>)}\n\n\n\n\n    }\n\n    return (\n\n        <div className=\"modalBackground\">\n            <div className=\"modal\">\n                <h2 className=\"modalHeader\">{loading ? \"Loading\" : \"Login with your encryption password\"}</h2>\n                <div className=\"modalBody\">\n                    {loading ? <LoadingSpinner /> : <></>}\n                   Password: <input className='modal-input' type=\"text\" value={password} onChange={(e)=>{setPassword(e.target.value)}}/>\n                    <button className=\"btn-big\" onClick={()=>{decrypt()}}>Login</button>\n                   \n                </div>\n    \n    \n            </div>\n            </div>\n\n    )\n}\n\nexport default LoginModal;"],"mappings":"mZAAA,OAAQA,QAAR,KAAuB,OAAvB,CACA,OAAQC,MAAR,KAAqB,QAArB,CACA,MAAOC,eAAP,KAA2B,mBAA3B,C,6IAGA,GAAMC,WAAU,CAAG,QAAbA,WAAa,MAA2B,IAAzBC,UAAyB,MAAzBA,SAAyB,CAAdC,QAAc,MAAdA,QAAc,CAE1C,cAAgCL,QAAQ,CAAC,EAAD,CAAxC,wCAAOM,QAAP,eAAiBC,WAAjB,eACA,eAA8BP,QAAQ,CAAC,KAAD,CAAtC,yCAAOQ,OAAP,eAAgBC,UAAhB,eAH0C,QAK3BC,QAL2B,iIAK1C,kLAEeC,IAFf,CAEsBC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B,CAFtB,CAGGL,UAAU,CAAC,IAAD,CAAV,CACOM,SAJV,CAIsBC,IAAI,CAACC,KAAL,CAAWN,IAAX,CAJtB,uBAK4BV,OAAM,CAACiB,MAAP,CAAcC,iBAAd,CAAgCJ,SAAhC,CAA2CT,QAA3C,CAL5B,QAKUc,SALV,eAMIhB,SAAS,CAACgB,SAAD,CAAT,CACAf,QAAQ,CAAC,KAAD,CAAR,CAPJ,iFAQqBI,UAAU,CAAC,KAAD,CAAV,CACbY,KAAK,CAAC,oGAAD,cAAuG,eAAQ,OAAO,CAAE,kBAAI,CAACT,MAAM,CAACC,YAAP,CAAoBS,UAApB,CAA+B,eAA/B,EAAgD,CAAtE,2BAAvG,CAAL,CATR,qEAL0C,0CAqB1C,mBAEI,YAAK,SAAS,CAAC,iBAAf,uBACI,aAAK,SAAS,CAAC,OAAf,wBACI,WAAI,SAAS,CAAC,aAAd,UAA6Bd,OAAO,CAAG,SAAH,CAAe,qCAAnD,EADJ,cAEI,aAAK,SAAS,CAAC,WAAf,WACKA,OAAO,cAAG,KAAC,cAAD,IAAH,cAAwB,kBADpC,2BAEa,cAAO,SAAS,CAAC,aAAjB,CAA+B,IAAI,CAAC,MAApC,CAA2C,KAAK,CAAEF,QAAlD,CAA4D,QAAQ,CAAE,kBAACiB,CAAD,CAAK,CAAChB,WAAW,CAACgB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX,CAA4B,CAAxG,EAFb,cAGI,eAAQ,SAAS,CAAC,SAAlB,CAA4B,OAAO,CAAE,kBAAI,CAACf,OAAO,GAAG,CAApD,mBAHJ,GAFJ,GADJ,EAFJ,CAiBH,CAtCD,CAwCA,cAAeP,WAAf"},"metadata":{},"sourceType":"module"}